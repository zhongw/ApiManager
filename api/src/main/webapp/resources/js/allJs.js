var app=angular.module("app",["ui.router","adminModule","userModule","visitorModule","userInterModule"]);var userInterModule=angular.module("userInterModule",[]);var visitorModule=angular.module("visitorModule",[]);var NEED_PASSWORD_CODE="E000007";var NEED_LOGIN="E000021";app.filter("removeLast",function(){return function(value){if(!value){return""}else{return value.substring(0,value.length-1)}}});app.filter("trustHtml",function($sce){return function(input){return $sce.trustAsHtml(input)}});app.filter("getClass",function(){return function(value){if(value=="primary"){return"bg-danger"}else{if(value=="foreign"){return"bg-success"}else{if(value=="associate"){return"bg-info"}else{return""}}}}});app.filter("toChinese",function(){return function(value){if(value=="primary"){return"主键"}else{if(value=="foreign"){return"外键"}else{if(value=="associate"){return"关联"}else{return"普通"}}}}});app.filter("getUrl",function($stateParams){return function(value){if(!value){return""}var url=URL_LIST[value];if(!url){return""}return url}});app.run(function($rootScope,$state,$stateParams,$location,$http,$timeout,httpService){$rootScope.$state=$state;$rootScope.$stateParams=$stateParams;$rootScope.pick=[];$rootScope.stopPropagation=function(e){e.stopPropagation();return false};$rootScope.goBack=function goBack(){history.back(-1)};$rootScope.reload=function reload(){location.reload()};$rootScope.go=function(href){$location.url(href)};$rootScope.loadPickByName=function loadPick(params,event,iCallBack,iCallBackParam){var iwidth=getValue(params,"iwidth");var iheight=getValue(params,"iheight");var radio=getValue(params,"radio");var tag=getValue(params,"tag");var code=getValue(params,"code");var type=getValue(params,"type");var iparams=getValue(params,"params");var showType=getValue(params,"showType");var def=getValue(params,"def");var tagName=getValue(params,"tagName");var iUrl=getValue(params,"iUrl");$rootScope.loadPick(event,iwidth,iheight,radio,tag,code,type,def,iparams,showType,iCallBack,iCallBackParam,tagName,iUrl)};$rootScope.loadPick=function loadPick(event,iwidth,iheight,radio,tag,code,type,def,params,showType,iCallBack,iCallBackParam,tagName,iUrl){if(!iUrl){iUrl="pick.do"}if(!params){params=""}if(!tagName){tagName=""}if(showType!="0"){if(!showType||showType==""){showType=5}}$("#pickContent").html(loadText);callAjaxByName("iUrl="+iUrl+"|isHowMethod=updateDiv|iPost=POST|iParams=&type="+type+"&radio="+radio+"&code="+code+"&tag="+tag+"&tagName="+tagName+"&def="+def+params,iCallBack,iCallBackParam);if(tagName){lookUp("lookUp",event,iheight,iwidth,showType,tagName)}else{lookUp("lookUp",event,iheight,iwidth,showType,tag)}showMessage("lookUp","false",false,-1)};$rootScope.getBaseData=function($scope,$http,params,page){if(page){params+="&currentPage="+page}httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT","0");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.list=null}else{$rootScope.error=null;$rootScope.list=result.data;$rootScope.page=result.page;$rootScope.others=result.others;$rootScope.deleteIds=","}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP_FLOAT",3);$rootScope.error=result})};$rootScope.getBaseDataToDataKey=function($scope,$http,params,page,dataKey,callBack){if(!page){page=1}params+="&currentPage="+page;httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT","0");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{$rootScope.error=null;$rootScope[dataKey]=result.data;if(!$rootScope.page){$rootScope.page={}}$rootScope.page[dataKey]=result.page;if(callBack){callBack()}}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP_FLOAT",3);$rootScope.error=result})};$rootScope.detail=function(title,iwidth,iurl,iParams,callBack){openMyDialog(title,iwidth);var params="iUrl="+iurl+"|iLoading=FLOAT";if(iParams){params+="|iParams="+iParams}httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.model=null}else{$rootScope.model=result.data;$rootScope.error=null;$rootScope.deleteIds=",";if(callBack){callBack()}}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP_FLOAT",3);$rootScope.error=result})};$rootScope.copyInterface=function(){changeDisplay("copyInterFace","interFaceDetail")};$rootScope.changeDisplay=function(id1,id2){changeDisplay(id1,id2)};$rootScope.del=function(iUrl,id,title){title=title?title:"确认要删除【"+id+"】？";if(myConfirm(title)){var params="iUrl="+iUrl+"|iLoading=TIP";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=TIP");
if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{$rootScope.error=null;$timeout(function(){$("#refresh").click()})}}).error(function(result){closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP",3);$rootScope.error=result})}};$rootScope.checkboxSelect=function(checkValues,value){if(!$rootScope[checkValues]){$rootScope[checkValues]=value+","}else{if($rootScope[checkValues].indexOf(","+value+",")>=0){$rootScope[checkValues]=$rootScope[checkValues].replace(value+",","")}else{$rootScope[checkValues]=$rootScope[checkValues]+value+","}}};$rootScope.selectAll=function(id,name,list){selectAll(id,name);if($("#"+id).prop("checked")==true){$rootScope[name]=",";for(var i=0;i<list.length;i++){$rootScope[name]=$rootScope[name]+list[i].id+","}}else{$rootScope[name]=","}};$rootScope.submitForm=function(iurl,callBack,myLoading,afterCallBack){if(callBack){callBack()}iLoading="TIPFLOAT";if(myLoading){iLoading=myLoading}var params="iUrl="+iurl+"|iLoading="+iLoading+"|iPost=POST|iParams=&"+$.param($rootScope.model);httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading="+iLoading);if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{if(result.success==1){$rootScope.error=null;$rootScope.model=result.data;closeMyDialog("myDialog");if(afterCallBack){afterCallBack()}else{$timeout(function(){$("#refresh").click()})}}}}).error(function(result){closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading="+iLoading,3);$rootScope.error=result})};$rootScope.changeSequence=function(url,id,changeId){var params="iUrl="+url+"|iLoading=FLOAT|iPost=POST|iParams=&id="+id+"&changeId="+changeId;httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{if(result.success==1){$rootScope.error=null;$timeout(function(){$("#refresh").click()})}}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP_FLOAT",3);$rootScope.error=result})};$rootScope.sendRequest=function(url,myLoading){var iLoading="FLOATTIP";if(myLoading){iLoading=myLoading}var params="iUrl="+url+"|iLoading="+iLoading+"|iPost=POST";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading="+iLoading);if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{if(result.success==1){$rootScope.error=null;$timeout(function(){$("#refresh").click()})}}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=PROPUP_FLOAT",3);$rootScope.error=result})};$rootScope.hasError=function(error,id){if(error&&error!=""){$("#"+id).removeClass("ndis");return true}else{if(!$("#"+id).hasClass("ndis")){$("#"+id).addClass("ndis")}return false}};$rootScope.showOperation=function(dataType,moduleId){var userRole=$("#sessionRoleIds").val();if((","+userRole+",").indexOf(",super,")>=0){return true}var needAuth=dataType;if(moduleId){needAuth=needAuth+"_"+moduleId}var sessionAuth=$("#sessionAuth").val();if((","+sessionAuth+",").indexOf(","+needAuth+",")>=0){return true}return false};$rootScope.getDate=function(str){if(str&&(str+"").indexOf(".")>0){return new Date(str.split(".")[0].replace("-","/").replace("-","/"))}};$rootScope.changeimg=function(){changeimg("imgCode2","verificationCode")};$rootScope.preAddDictionary=function(){var content=getParamFromTable("content","name");$rootScope.model.content=content};$rootScope.logDetailFormat=function(){$rootScope.model.content=format($rootScope.model.content)};$rootScope.jsonformat=function(id,tiperror){var result=format($rootScope.model[id],tiperror);if(result){$rootScope.model[id]=result}};$rootScope.callAjaxByName=function(iurl){callAjaxByName(iurl)};$rootScope.iClose=function(id){iClose(id)};$rootScope.staticize=function(id){callAjaxByName("iUrl=user/staticize/staticize.do?projectId="+id+"|iLoading=TIPFLOAT静态化中，请稍后...|ishowMethod=updateDivWithImg|iFormId=staticize-form")};$rootScope.downloadStaticize=function(id){var params="iUrl=user/staticize/downloadStaticize.do?projectId="+id+"|iLoading=TIPFLOAT静态化中，请稍后...|iPost=POST";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=TIPFLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{if(result.success==1){$("#downloadUrl").html("操作成功，将自动下载，3s后若无反应，请点击：<a href='"+result.data+"' target='_blank'>下载</a> 手动下载");window.open(result.data)}}}).error(function(result){lookUp("lookUp","",100,300,3);closeTip("[ERROR]未知异常，请联系开发人员查看日志","iLoading=TIPFLOAT",3);$rootScope.error=result})};$rootScope.addInterfaceCallBack=function(){var headJson=getParamFromTable("editHeaderTable","name");try{eval("("+headJson+")")}catch(e){alert("请求头输入有误，json解析出错："+e);
return}$rootScope.model.header=headJson;var responseJson=getParamFromTable("editResponseParamTable","name");try{eval("("+responseJson+")")}catch(e){alert("返回参数输入有误，json解析出错："+e);return}$rootScope.model.responseParam=responseJson;if($rootScope.model.paramType=="FORM"){var paramJson=getParamFromTable("editParamTable","name");try{eval("("+paramJson+")")}catch(e){alert("请求参数输入有误，json解析出错："+e);return}$rootScope.model.param=paramJson}}});

var MY_PROJECT="my-project";var URL_LIST={"my-project":"#user/project/list?projectShowType=3&menu_b=menu_create_join&type=-1&menu_a=menu-project&pageName=我的项目","my-create-project":"#user/project/list?projectShowType=1&menu_b=menu_create&type=-1&menu_a=menu-project&pageName=我的创建的项目","my-join-project":"#user/project/list?projectShowType=2&menu_b=menu_join&type=-1&menu_a=menu-project&pageName=我的加入的项目","all-project":"#user/project/list?projectShowType=0&menu_b=menu_all_project&type=-1&menu_a=menu-project&pageName=所有用户项目","profile":"#/profile?menu_a=menu-profile&pageName=个人资料","importFromSql":"#/user/article/dictionary/importFromSql?menu_a=menu-import&pageName=导入数据库表"};

app.factory("httpService",["$http",function($http){return{callHttpMethod:function($http,params,iCallBack,iCallBackParam){return callHttpName($http,params,iCallBack,iCallBackParam)}}}]);function callHttpName($http,params,iCallBack,iCallBackParam){var iUrl=getValue(params,"iUrl");var iFormId=getValue(params,"iFormId");var iPost=getValue(params,"iPost");var iLoading=getValue(params,"iLoading");var iTarget=getValue(params,"iTarget");var iParams=getValue(params,"iParams");return callHttp($http,iUrl,iFormId,iPost,iLoading,iTarget,iParams)}function callHttp($http,iUrl,iFormId,iPost,iLoading,iTarget,iParams){iUrl=iUrl;iParams=iParams;iTarget=iTarget?iTarget:"lookUpContent";var xParams="";if(iFormId){xParams=$("#"+iFormId).serialize()}showTip(iTarget,iLoading);if(iPost){return $http({method:"POST",data:xParams+iParams,url:iUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}else{if(iUrl.indexOf("?")>0){iUrl=iUrl+"&"}else{iUrl=iUrl+"?"}return $http({method:"GET",url:iUrl+xParams+iParams})}}function httpSuccess(data,iLoading,tipTime){if(data.success==0){if(data.error.code==NEED_PASSWORD_CODE){lookUp("passwordDiv","",300,300,6,"");showMessage("passwordDiv","false",false,-1);showMessage("fade","false",false,-1);changeimg("imgCode","verificationCode");$("#password").val("");$("#password").focus();data="[ERROR]["+NEED_PASSWORD_CODE+"] "+data.error.message+"，点击请输入访问密码"}else{if(data.error.code==NEED_LOGIN){data="[ERROR]["+NEED_LOGIN+"] "+data.error.message}else{data="[ERROR]"+data.error.message}}}else{if(isJson(data)){data="[OK]"}else{data=data.responseText;if(data.indexOf("[ERRORPAGE]")>=0){data="[ERROR]抱歉，系统繁忙，请稍后再试！"}if(data.indexOf("[LOGINPAGE]")>=0){data="[ERROR]尚未登录，请登录后再试！"}}}closeTip(data,iLoading,tipTime);return data}function isJson(obj){return(typeof(obj)=="object"&&Object.prototype.toString.call(obj).toLowerCase()=="[object object]"&&!obj.length)};

var commonUrlParam="projectId&projectName&moduleId&moduleName&menu_a&menu_b&dataType&pageName";app.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("userArticleList",{url:"/user/article/list?currentPage&name&category&"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/user/articleList.tpl.html?v=v8.0.5"}},"page@userArticleList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("userEditArticle",{url:"/user/article/edit?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/articleEdit.tpl.html?v=v8.0.5"}}}}).state("userArticleDetail",{url:"/user/article/detail?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/articleDetail.tpl.html?v=v8.0.5"}}}});$stateProvider.state("userDictionaryList",{url:"/user/dictionary/list?currentPage&name&category&"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/user/dictionaryList.tpl.html?v=v8.0.5"}},"page@userDictionaryList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("userEditDictionary",{url:"/user/dictionary/edit?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/dictionaryEdit.tpl.html?v=v8.0.5"}}}}).state("userDictionaryDetail",{url:"/user/dictionary/detail?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/dictionaryDetail.tpl.html?v=v8.0.5"}}}});$stateProvider.state("userInterList",{url:"/user/interface/list?&interfaceName&url&currentPage&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/interfaceList.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/interfaceCopy.tpl.html?v=v8.0.5"}},"page@userInterList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("userInterfaceEdit",{url:"/user/interface/edit?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/interfaceEdit.tpl.html?v=v8.0.5"}},"detail":{templateUrl:function($stateParems){return"resources/html/subTpl/interEditDialog.tpl.html?v=v8.0.5"}},"interBaseEdit@userInterfaceEdit":{templateUrl:"resources/html/subTpl/interBaseEdit.tpl.html?v=v8.0.5"},"interResParamEdit@userInterfaceEdit":{templateUrl:"resources/html/subTpl/interResParamEdit.tpl.html?v=v8.0.5"},"interParamEdit@userInterfaceEdit":{templateUrl:"resources/html/subTpl/interParamEdit.tpl.html?v=v8.0.5"},"interHeaderEdit@userInterfaceEdit":{templateUrl:"resources/html/subTpl/interHeaderEdit.tpl.html?v=v8.0.5"},"interExampleEdit@userInterfaceEdit":{templateUrl:"resources/html/subTpl/interExampleEdit.tpl.html?v=v8.0.5"}}}).state("userInterfaceDetail",{url:"/user/interface/detail?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/interfaceDetail.tpl.html?v=v8.0.5"}}}}).state("userInterfaceDebug",{url:"/user/interface/debug?id&"+commonUrlParam,views:{"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"main":{templateUrl:function($stateParems){return"resources/html/user/interfaceDebug.tpl.html?v=v8.0.5"}},"interParamEdit@userInterfaceDebug":{templateUrl:"resources/html/subTpl/interParamEdit.tpl.html?v=v8.0.5"},"interHeaderEdit@userInterfaceDebug":{templateUrl:"resources/html/subTpl/interHeaderEdit.tpl.html?v=v8.0.5"}}});$stateProvider.state("loginOrRegister",{url:"/login",views:{"main":{templateUrl:"resources/html/admin/login.tpl.html?v=v8.0.5"}}}).state("register",{url:"/register",views:{"main":{templateUrl:"resources/html/admin/register.tpl.html?v=v8.0.5"}}}).state("findPwd",{url:"/findPwd",views:{"main":{templateUrl:"resources/html/user/findPwd.tpl.html?v=v8.0.5"}}}).state("menuList",{url:"/admin/menu/list?parentId&type&menuName&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/menuList.tpl.html?v=v8.0.5"},"page@menuList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/admin/menuDetail.tpl.html?v=v8.0.5"
}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuMenu.tpl.html?v=v8.0.5"}}}}).state("projectList",{url:"/user/project/list?projectShowType&type&"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/user/projectList.tpl.html?v=v8.0.5"}},"page@projectList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/projectDetail.tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuProject.tpl.html?v=v8.0.5"}}}}).state("project",{url:"/user/project?"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/user/project.tpl.html?v=v8.0.5"}},"detail":{templateUrl:function($stateParems){return"resources/html/user/projectDetail.tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("moduleList",{url:"/user/module/list?name&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/moduleList.tpl.html?v=v8.0.5"},"page@moduleList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/moduleDetail.tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("errorList",{url:"/user/error/list?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/errorList.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"page@errorList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/errorDetail.tpl.html?v=v8.0.5"}}}}).state("projectUserList",{url:"/user/projectUser/list?name&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/projectUserList.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"page@projectUserList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/projectUserDetail.tpl.html?v=v8.0.5"}}}}).state("logList",{url:"/user/log/list?identy&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/logList.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"page@logList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/logDetail.tpl.html?v=v8.0.5"}}}}).state("sourceList",{url:"/user/source/list?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/sourceList.tpl.html?v=v8.0.5"},"page@sourceList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}},"detail":{templateUrl:function($stateParems){return"resources/html/user/sourceDetail.tpl.html?v=v8.0.5"}}}}).state("settingList",{url:"/admin/setting/list?key&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/settingList.tpl.html?v=v8.0.5"},"page@settingList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("settingDetail",{url:"/admin/setting/detail?type&id&"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/admin/settingDetail_"+$stateParems.type+".tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("hotSearchList",{url:"/admin/hotSearch/list?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/hotSearchList.tpl.html?v=v8.0.5"},"page@hotSearchList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("configProperties",{url:"/admin/config/properties?"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/admin/config.properties.html"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("dictionaryImoprtFromSql",{url:"/user/article/dictionary/importFromSql?"+commonUrlParam,views:{"main":{templateUrl:function($stateParems){return"resources/html/user/dictionaryImportFromSql.tpl.html?v=v8.0.5"}}}}).state("userList",{url:"/admin/user/list?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/userList.tpl.html?v=v8.0.5"},"page@userList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/admin/userDetail.tpl.html?v=v8.0.5"
}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("commentList",{url:"/user/comment/list?articleId&"+commonUrlParam,views:{"main":{templateUrl:"resources/html/user/commentList.tpl.html?v=v8.0.5"},"page@commentList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/user/commentDetail.tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuModule.tpl.html?v=v8.0.5"}}}}).state("roleList",{url:"/admin/role/list?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/roleList.tpl.html?v=v8.0.5"},"page@roleList":{templateUrl:"resources/html/admin/page.tpl.html?v=v8.0.5"},"detail":{templateUrl:function($stateParems){return"resources/html/admin/roleDetail.tpl.html?v=v8.0.5"}},"subMenu":{templateUrl:function($stateParems){return"resources/html/subTpl/subMenuSetting.tpl.html?v=v8.0.5"}}}}).state("profile",{url:"/profile?"+commonUrlParam,views:{"main":{templateUrl:"resources/html/admin/userDetail.tpl.html?v=v8.0.5"}}})});

app.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("visitorArticleDetailOld",{url:"/:projectId/article/detail/:moduleId/:type/:id",views:{"main":{templateUrl:function($stateParems){if($stateParems.type!="DICTIONARY"){return"resources/html/visitor/articleDetail_ARTICLE.tpl.html?v=v8.0.5"}else{return"resources/html/visitor/articleDetail_"+$stateParems.type+".tpl.html?v=v8.0.5"}}},"addComment@visitorArticleDetailOld":{templateUrl:"resources/html/visitor/addComment.tpl.html?v=v8.0.5"},"page@visitorArticleDetailOld":{templateUrl:"resources/html/visitor/page_xs.tpl.html?v=v8.0.5"}}}).state("visitorArticleDetail",{url:"/article/detail?projectId&moduleId&type&id",views:{"main":{templateUrl:function($stateParems){if($stateParems.type!="DICTIONARY"){return"resources/html/visitor/articleDetail_ARTICLE.tpl.html?v=v8.0.5"}else{return"resources/html/visitor/articleDetail_"+$stateParems.type+".tpl.html?v=v8.0.5"}}},"addComment@visitorArticleDetail":{templateUrl:"resources/html/visitor/addComment.tpl.html?v=v8.0.5"},"page@visitorArticleDetail":{templateUrl:"resources/html/visitor/page_xs.tpl.html?v=v8.0.5"}}}).state("visitorArticleListOld",{url:"/:projectId/article/list/:&moduleId/:type/:category/:name/:status",views:{"main":{templateUrl:function($stateParems){if($stateParems.type!="DICTIONARY"){return"resources/html/visitor/articleList_ARTICLE.tpl.html?v=v8.0.5"}else{return"resources/html/visitor/articleList_"+$stateParems.type+".tpl.html?v=v8.0.5"}}},"page@visitorArticleList":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorArticleList",{url:"/article/list?projectId&moduleId&type&category&name&status",views:{"main":{templateUrl:function($stateParems){if($stateParems.type!="DICTIONARY"){return"resources/html/visitor/articleList_ARTICLE.tpl.html?v=v8.0.5"}else{return"resources/html/visitor/articleList_"+$stateParems.type+".tpl.html?v=v8.0.5"}}},"page@visitorArticleList":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorSourceDetail",{url:"/source/detail?projectId&id",views:{"main":{templateUrl:function($stateParems){return"resources/html/visitor/sourceDetail"+".tpl.html?v=v8.0.5"}}}})});

var userModule=angular.module("userModule",[]);var adminModule=angular.module("adminModule",[]);userModule.filter("cut",function(){return function(value,wordwise,max,tail){if(!value){return""}max=parseInt(max,10);if(!max){return value}if(value.length<=max){return value}value=value.substr(0,max);if(wordwise){var lastspace=value.lastIndexOf(" ");if(lastspace!=-1){value=value.substr(0,lastspace)}}return value+(tail||" …")}});userModule.controller("detailCtrl",function($scope,$http,$state,$stateParams,httpService){});userModule.controller("loginOrRegisterCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.loginOrRegister=function(iurl,callBack,submitForm){var params="iUrl="+iurl+"|iLoading=FLOAT|iPost=POST";if(submitForm){params=params+"|iParams=&"+$.param($rootScope.model)}httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{if(result.success==1){if(result.data){$rootScope.model=result.data}if(callBack){callBack()}}else{$rootScope.error=result.error.message}}}).error(function(result){$rootScope.error="未知异常，请联系开发人员查看日志"})};$scope.loginSuccess=function(){window.location.href="admin.do"};$scope.registerSuccess=function(){$rootScope.error="注册成功，请登录";$rootScope.go("login")}});userModule.controller("userCtrl",function($rootScope,$scope,$http,$state,$location,$stateParams,httpService){$scope.pageMethod=function(callBackMethod,page,updateUrl){$scope[callBackMethod](page,updateUrl)};$scope.queryTop50Module=function(){var params="iUrl=user/module/list.do|iLoading=FLOAT|iPost=true|iParams=&pageSize=50&&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,1,"top50Module")};$scope.querySettingList=function(page){var params="iUrl=admin/setting/list.do|iLoading=FLOAT|iPost=true|iParams=&remark="+$("#searchRemark").val()+"&key="+$stateParams.key;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"settingList")};$scope.queryProjectList=function(page){var params="iUrl=user/project/list.do|iLoading=FLOAT|iPost=true|iParams=&name="+$stateParams.name+"&type="+$stateParams.type+"&projectShowType="+$stateParams.projectShowType;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"projects")};$scope.queryErrorList=function(page){var params="iUrl=user/error/list.do|iLoading=FLOAT|iPost=true|iParams=";params+="&projectId="+$stateParams.projectId;params+="&errorMsg="+$stateParams.errorMsg;params+="&errorCode="+$stateParams.errorCode;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"errors")};$scope.queryProjectUserList=function(page){var params="iUrl=user/projectUser/list.do|iLoading=FLOAT|iParams=&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"projectUsers")};$scope.queryModuleList=function(page){var params="iUrl=user/module/list.do|iLoading=FLOAT|iParams=&projectId="+$stateParams.projectId+"&name="+$stateParams.name;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"modules")};$scope.queryUserList=function(page){var params="iUrl=user/list.do|iLoading=FLOAT|iPost=true|iParams=&trueName="+$stateParams.trueName+"&userName="+$stateParams.userName+"&email="+$stateParams.email;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"users")};$scope.queryInterfaceList=function(page,updateUrl){var params="iUrl=user/interface/list.do|iLoading=FLOAT|iPost=true|iParams=";params+="&interfaceName="+$stateParams.interfaceName;params+="&url="+$stateParams.url;params+="&moduleId="+$stateParams.moduleId;params+="&projectId="+$stateParams.projectId;if(updateUrl){var url=replaceParamFromUrl($location.url(),"currentPage",page);url=replaceParamFromUrl(url,"interfaceName",$("#interfaceName").val());url=replaceParamFromUrl(url,"url",$("#url").val());url=url.substr(1,url.length-1);$rootScope.go(url);return}if(!page){page=$stateParams.currentPage}$rootScope.getBaseDataToDataKey($scope,$http,params,page,"interfaces")};$scope.queryArticleList=function(page,updateUrl){var params="iUrl=user/article/list.do|iLoading=FLOAT|iPost=POST|iParams=&type=ARTICLE"+"&moduleId="+$stateParams.moduleId+"&projectId="+$stateParams.projectId+"&category="+$stateParams.category+"&name="+$stateParams.name;if(updateUrl){var url=replaceParamFromUrl($location.url(),"currentPage",page);url=replaceParamFromUrl(url,"name",$("#searchName").val());url=replaceParamFromUrl(url,"category",$("#searchCategory").val());url=url.substr(1,url.length-1);$rootScope.go(url);return}if(!page){page=$stateParams.currentPage}$rootScope.getBaseDataToDataKey($scope,$http,params,page,"articles")};$scope.queryDictionaryList=function(page,updateUrl){var params="iUrl=user/article/list.do|iLoading=FLOAT|iPost=POST|iParams=&type=DICTIONARY"+"&moduleId="+$stateParams.moduleId+"&projectId="+$stateParams.projectId+"&name="+$stateParams.name;if(updateUrl){params+="&currentPage="+page;var url=replaceParamFromUrl($location.url(),"currentPage",page);
url=replaceParamFromUrl(url,"name",$("#searchName").val());url=url.substr(1,url.length-1);$rootScope.go(url);return}if(!page){page=$stateParams.currentPage}$rootScope.getBaseDataToDataKey($scope,$http,params,page,"dictionaries")};$scope.queryCommentList=function(page){var params="iUrl=user/comment/list.do|iLoading=FLOAT|iPost=POST|iParams=&articleId="+$stateParams.articleId+"&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"comments")};$scope.queryLogList=function(page){var params="iUrl=user/log/list.do|iLoading=FLOAT|iPost=true|iParams=&modelName="+$("#modelName").val()+"&identy="+$stateParams.identy;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"logs")};$scope.querySourceList=function(page){var params="iUrl=user/source/list.do|iLoading=FLOAT|iPost=true|iParams=&name="+$stateParams.name+"&moduleId="+$stateParams.moduleId+"&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,page,"sources")};$scope.getProjectDetail=function(){var params="iUrl=user/project/detail.do|iLoading=FLOAT|iPost=true|iParams=&id="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,1,"projectDetail");params="iUrl=user/project/moreInfo.do|iLoading=FLOAT|iPost=true|iParams=&id="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,1,"projectMoreInfo")};$scope.getInterfaceDetail=function(isEdit,isDebug){$rootScope.debugShowParam=true;$rootScope.interfaceDialog="header";var params="iUrl=user/interface/detail.do|iLoading=FLOAT|iPost=POST|iParams=&id="+$stateParams.id+"&projectId="+$stateParams.projectId+"&moduleId="+$stateParams.moduleId;$rootScope.getBaseDataToDataKey($scope,$http,params,null,"model",function(){if(isEdit){createWangEditor("interface-editor","remark",initInterfaceEditor,150)}$rootScope.errors=eval("("+$rootScope.model.errors+")");$rootScope.model.fullUrl=$rootScope.model.moduleUrl+$rootScope.model.url;if($rootScope.model.method){$rootScope.model.debugMethod=$rootScope.model.method.split(",")[0]}if(isDebug){var val=$("#hasInstallPlug").val();if(val=="true"){$("#has-plug").removeClass("none");$("#no-plug").addClass("none");$("#crap-debug-send-new").removeClass("none");$("#crap-debug-send").addClass("none")}$("#editHeaderTable").find("tbody").find("tr").remove();$("#editParamTable").find("tbody").find("tr").remove();$.each($rootScope.model.crShowHeaderList,function(n,value){addOneDebugTr("editHeaderTable",null,value)});if($rootScope.model.crShowParamList){$.each($rootScope.model.crShowParamList,function(n,value){addOneDebugTr("editParamTable",null,value)})}addOneDebugTr("editHeaderTable");addOneDebugTr("editParamTable")}if(isEdit){$("#editResponseParamTable").find("tbody").find("tr").remove();$("#editHeaderTable").find("tbody").find("tr").remove();$("#editParamTable").find("tbody").find("tr").remove();$.each($rootScope.model.crShowHeaderList,function(n,value){addOneInterHeadTr(null,value,isDebug)});if($rootScope.model.crShowParamList){$.each($rootScope.model.crShowParamList,function(n,value){addOneInterParamTr(null,value)})}$.each($rootScope.model.crShowResponseParamList,function(n,value){addOneInterRespTr(null,value)});addOneInterRespTr();addOneInterHeadTr();addOneInterParamTr();initDragTable("editHeaderTable");initDragTable("editParamTable");initDragTable("editResponseParamTable")}})};$scope.getArticleDetail=function(isEdit){var params="iUrl=user/article/detail.do|iLoading=FLOAT|iPost=POST|iParams=&id="+$stateParams.id+"&type=ARTICLE"+"&moduleId="+$stateParams.moduleId+"&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,null,"model",function(){if(isEdit){markdownEditor=null;createWangEditor("article-editor","content",initArticleEditor,"500px")}})};$scope.getDictionaryDetail=function(isEdit){var params="iUrl=user/article/detail.do|iLoading=FLOAT|iPost=POST|iParams=&id="+$stateParams.id+"&type=DICTIONARY"+"&moduleId="+$stateParams.moduleId+"&projectId="+$stateParams.projectId;$rootScope.getBaseDataToDataKey($scope,$http,params,null,"model",function(){if(isEdit){if(!$rootScope.model.content){$rootScope.model.content="{}"}var content=eval("("+$rootScope.model.content+")");$("#content").find("tbody").find("tr").remove();$.each(content,function(n,value){addOneDictionaryTr(null,value)});addOneDictionaryTr();initDragTable("content")}else{if($rootScope.model.content!=""){$rootScope.model.dictionaries=eval("("+$rootScope.model.content+")")}}})};$scope.debugInterface=function(){$rootScope.model.header=getParamFromTable("editHeaderTable","name");if($rootScope.model.paramType=="FORM"){$rootScope.model.param=getParamFromTable("editParamTable","name")}var params="iUrl=user/interface/debug.do|iLoading=FLOAT|iPost=POST|iParams=&"+$.param($rootScope.model);$rootScope.getBaseDataToDataKey($scope,$http,params,0,"debug",function(){$rootScope.debugResult=format($rootScope.debug.debugResult,false)})};$scope.openInterfaceDialog=function(id,title,width){$rootScope.interfaceDialog=id;
openMyDialog(title,width)};$rootScope.saveArticleCallBack=function(){if(!userMarkdown){return}$rootScope.model.markdown=markdownEditor.getMarkdown();$rootScope.model.content=markdownEditor.getHTML()};$scope.clearDonwloadUrl=function(){$("#downloadUrl").html("")};$scope.getData=function(page,setPwd){var params="iUrl=admin/init.do|iLoading=fase";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=false");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){alert("系统初始化异常："+isSuccess.replace("[ERROR]",""))}else{$rootScope.settings=result.data.settingMap;$rootScope.sessionAdminName=result.data.sessionAdminName;$rootScope.sessionAdminAuthor=result.data.sessionAdminAuthor;$rootScope.sessionAdminName=result.data.sessionAdminName;$rootScope.sessionAdminRoleIds=result.data.sessionAdminRoleIds;$rootScope.sessionAdminId=result.data.sessionAdminId;$rootScope.errorTips=result.data.errorTips}})};$scope.isAdmin=function(id,needAuth){var auth=$("#sessionAuth").val();var hasAuth=false;if((","+auth+",").indexOf(",super,")>=0){hasAuth=true}if((","+auth+",").indexOf(",ADMIN,")>=0){if(needAuth){if((","+auth+",").indexOf(","+needAuth+",")>=0){hasAuth=true}}else{hasAuth=true}}if(hasAuth){if(id){$("#"+id).removeClass("ndis")}return true}else{if(id){if(!$("#"+id).hasClass("ndis")){$("#"+id).addClass("ndis")}}return false}};$scope.isSupperAdmin=function(id){var auth=$("#sessionAuth").val();if((","+auth+",").indexOf(",super,")>=0){if(id){$("#"+id).removeClass("ndis")}return true}else{if(id){if(!$("#"+id).hasClass("ndis")){$("#"+id).addClass("ndis")}}return false}};$scope.profile=function(id){var params="iUrl=user/detail.do?id="+id+"|iLoading=FLOAT";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.model=null}else{$rootScope.model=result.data;$rootScope.error=null}})};$scope.closeErrorTips=function(){var params="iUrl=admin/closeErrorTips.do|iLoading=FLOAT";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","")}else{$rootScope.error=null;$rootScope.errorTips=null}})};$scope.loginOut=function(){callAjaxByName("iUrl=user/loginOut.do|iLoading=false|ishowMethod=doNothing")};$scope.getData()});userModule.controller("dictionaryInportFromSqlCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$rootScope.model={};$rootScope.model.isMysql="true";$rootScope.error=null});adminModule.controller("adminCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getProperty=function(){var params="iUrl=admin/property.do|iLoading=FLOAT";$rootScope.getBaseDataToDataKey($scope,$http,params,null,"property")};$scope.queryMenuList=function(page){if($("#searchType").val()!=null&&$("#searchType").val()!=""){$stateParams.type=$("#searchType").val()}var params="iUrl=admin/menu/list.do|iLoading=FLOAT|iParams=&type="+$stateParams.type;if($("#menuName").val()!=null&&$("#menuName").val()!=""){params+="&menuName="+$("#menuName").val()}else{params+="&parentId="+$stateParams.parentId}$rootScope.getBaseDataToDataKey($scope,$http,params,page,"menus")}});userModule.controller("hotSearchCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page){var params="iUrl=admin/hotSearch/list.do|iLoading=FLOAT|iParams=";$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});userModule.controller("settingDetailCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(){var params="iLoading=FLOAT|iUrl=admin/setting/detail.do?id="+$stateParams.id+"&key="+$stateParams.key+"&type="+$stateParams.type;httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.model=null}else{$rootScope.error=null;$rootScope.model=result.data}})};$scope.getData()});userModule.controller("roleCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page){var params="iUrl=admin/role/list.do|iLoading=FLOAT|iPost=true|iParams=&roleName="+$("#roleName").val();$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});

visitorModule.filter("encodeURL",function($sce){return function(input){if(input){input=replaceAll(input,"\\/","CA_FXG");input=replaceAll(input,"\\+","CA_ADD");input=replaceAll(input,"\\-","CA_DES");input=replaceAll(input,"\\&","CA_AND");input=replaceAll(input,"\\|","CA_HZ");input=replaceAll(input,"\\{","CA_DKHS");input=replaceAll(input,"\\}","CA_DKHE");input=replaceAll(input,"\\?","CA_WH");input=replaceAll(input,"\\*","CA_XH");input=replaceAll(input,"\\#","CA_JH");input=replaceAll(input,"\\:","CA_MH");input=replaceAll(input,"\\.","CA_DH")}return input}});visitorModule.filter("decodeURL",function($sce){return function(input){if(input){input=replaceAll(input,"CA_FXG","/");input=replaceAll(input,"CA_ADD","+");input=replaceAll(input,"CA_DES","-");input=replaceAll(input,"CA_AND","&");input=replaceAll(input,"CA_HZ","|");input=replaceAll(input,"CA_DKHS","{");input=replaceAll(input,"CA_DKHE","}");input=replaceAll(input,"CA_WH","?");input=replaceAll(input,"CA_XH","*");input=replaceAll(input,"CA_JH","#");input=replaceAll(input,"CA_MH",":");input=replaceAll(input,"CA_DH",".")}return input}});visitorModule.controller("detailCtrl",function($scope,$http,$state,$stateParams,httpService){});visitorModule.controller("visitorSearchCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page){if(!$stateParams.keyword){$stateParams.keyword=""}params="iUrl=visitorSearch.do|iPost=POST|iLoading=FLOAT|iParams=&keyword="+$stateParams.keyword;$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("errorCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var params="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");params="iUrl=visitor/error/list.do|iLoading=FLOAT|iPost=true|iParams=&projectId="+$stateParams.projectId+"&errorMsg="+$stateParams.errorMsg+"&errorCode="+$stateParams.errorCode+params;$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("visitorDictCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){var params="iUrl=visitor/article/diclist.do|iLoading=FLOAT|iPost=POST|iParams=&moduleId="+$stateParams.moduleId+"&name="+$stateParams.search;if(setPwd){setPassword()}params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("fontArticleCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){var params="iUrl=visitor/article/list.do|iLoading=FLOAT|iPost=POST|iParams=&type="+$stateParams.type+"&moduleId="+$stateParams.moduleId+"&name="+$stateParams.name+"&category="+$stateParams.category+"&status="+$stateParams.status;if(setPwd){setPassword()}params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("articleDetailCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var params="iLoading=FLOAT|iUrl=visitor/article/detail.do?id="+$stateParams.id+"&currentPage="+page;params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.dictionary=null;$rootScope.article=null;$rootScope.model=null}else{$rootScope.article=result.data;$rootScope.page=result.page;$rootScope.model=result.others.comment;$rootScope.comments=result.others.comments;$rootScope.commentCode=result.others.commentCode;$rootScope.others=result.others;if($rootScope.article.content!=""&&$rootScope.article.type=="DICTIONARY"){$rootScope.dictionary=eval("("+$rootScope.article.content+")")}}})};$scope.getData(1)});visitorModule.controller("visitorProjectCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){var params="iUrl=visitor/project/list.do|iLoading=FLOAT|iPost=true|iParams=&projectShowType="+$stateParams.projectShowType+"&name="+$stateParams.name;$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("visitorModuleCtrl",function($rootScope,$scope,$http,$state,$stateParams,$location,$http,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var url=$location.absUrl();var projectId=getParamFromUrl(url,"projectId");var params="&projectId="+projectId+"&currentPage="+page;params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");params="iUrl=visitor/module/list.do|iLoading=FLOAT|iParams="+params;
httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.moduleList=null}else{$rootScope.moduleList=result.data;$rootScope.others=result.others;$rootScope.project=result.others.project;$rootScope.page=result.page}})};$scope.getData()});visitorModule.controller("visitorModuleMenuCtrl",function($rootScope,$scope,$http,$state,$stateParams,$location,$http,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var url=$location.absUrl();var projectId=getParamFromUrl(url,"projectId");var params="iUrl=visitor/module/menu.do|iLoading=FLOAT|iParams="+"&projectId="+projectId;httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.projectMenu=null;$rootScope.project=null}else{$rootScope.projectMenu=result.data;$rootScope.project=result.others.project}})};$scope.getData()});visitorModule.controller("visitorInterfaceCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){var params="&interfaceName="+$stateParams.interfaceName+"&url="+$stateParams.url+"&moduleId="+$stateParams.moduleId;if(setPwd){setPassword()}params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");params="iUrl=visitor/interface/list.do|iLoading=FLOAT|iPost=true|iParams="+params;$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("interfaceDetailCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var params="iUrl=visitor/interface/detail.do|iLoading=FLOAT|iParams=&id="+$stateParams.id;params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.model=null}else{$rootScope.model=result.data;$rootScope.model.fullUrl=$rootScope.model.moduleUrl+$rootScope.model.url;$rootScope.versions=result.others.versions;$rootScope.errors=eval("("+result.data.errors+")");if(result.data.param.length>5&&result.data.param.substring(0,5)=="form="){$rootScope.formParams=eval("("+result.data.param.substring(5)+")")}else{$rootScope.model.customParams=result.data.param;$rootScope.formParams=null}$rootScope.paramRemarks=eval("("+result.data.paramRemark+")");$rootScope.others=result.others}})};$scope.getData()});visitorModule.controller("visitorSourceDetailCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var params="iLoading=FLOAT|iUrl=visitor/source/detail.do?id="+$stateParams.id;params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){$rootScope.error=isSuccess.replace("[ERROR]","");$rootScope.source=null}else{$rootScope.source=result.data}})};$scope.getData()});visitorModule.controller("visitorSourceCtrl",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){if(setPwd){setPassword()}var params="iUrl=visitor/source/list.do|iLoading=FLOAT|iParams=&moduleId="+$stateParams.moduleId;params+="&password="+unescapeAndDecode("password");params+="&visitCode="+unescapeAndDecode("visitCode");$rootScope.getBaseData($scope,$http,params,page)};$scope.getData()});visitorModule.controller("fontInit",function($rootScope,$scope,$http,$state,$stateParams,httpService){$scope.getData=function(page,setPwd){var params="iUrl=visitor/init.do|iLoading=FLOAT";httpService.callHttpMethod($http,params).success(function(result){var isSuccess=httpSuccess(result,"iLoading=FLOAT");if(!isJson(result)||isSuccess.indexOf("[ERROR]")>=0){alert("系统初始化异常："+isSuccess.replace("[ERROR]",""))}$rootScope.settings=result.data.settingMap;$rootScope.sessionAdminName=result.data.sessionAdminName;$rootScope.fontMenus=result.data.menuList})};$scope.getData()});

app.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/notFound");$stateProvider.state("notFound",{url:"/notFound",views:{"main":{templateUrl:"resources/html/visitor/notFound.tpl.html?v=v8.0.5"}}}).state("visitorSearchCtrl",{url:"/visitorSearch?keyword",views:{"main":{templateUrl:function($stateParems){return"resources/html/visitor/searchResult.tpl.html?v=v8.0.5"}},"page@visitorSearchCtrl":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorError",{url:"/error/list?projectId",views:{"main":{templateUrl:"resources/html/visitor/errorList.tpl.html?v=v8.0.5"},"page@visitorError":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorModuleCtrl",{url:"/module/list?projectId",views:{"main":{templateUrl:"resources/html/visitor/moduleList.tpl.html?v=v8.0.5"},"page@visitorModuleCtrl":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorInterfaceCtrl",{url:"/interface/list?projectId&moduleId",views:{"main":{templateUrl:"resources/html/visitor/interfaceList.tpl.html?v=v8.0.5"},"page@visitorInterfaceCtrl":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorInterfaceDetailCtrl",{url:"/interface/detail?projectId&id",views:{"main":{templateUrl:"resources/html/visitor/interfaceDetail.tpl.html?v=v8.0.5"}}}).state("frontInterfaceDetailCtrlOld",{url:"/:projectId/front/interfaceDetail/:id",views:{"main":{templateUrl:"resources/html/visitor/interfaceDetail.tpl.html"}}}).state("visitorSourceList",{url:"/source/list?projectId&moduleId",views:{"main":{templateUrl:"resources/html/visitor/sourceList.tpl.html?v=v8.0.5"},"page@visitorSourceList":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}}).state("visitorProjectList",{url:"/project/list?projectShowType&type",views:{"main":{templateUrl:"resources/html/visitor/projectList.tpl.html?v=v8.0.5"},"page@visitorProjectList":{templateUrl:"resources/html/visitor/page.tpl.html?v=v8.0.5"}}})});

var succ1='<div class="text-success h tc"><i class="iconfont">&#xe6b1;</i>&nbsp;&nbsp;';var succ2="</div>";var err1='<div class="text-danger h tc"><i class="iconfont">&#xe6b7;</i>&nbsp;&nbsp;';var err2="</div>";var loadText="<div class='tc h tip'><p><img src=\"resources/images/loading.gif\" />&nbsp;&nbsp;努力加载中，请稍后...</p></div>";function openPage(link){location.href=link}function voidFunction(){}function goBack(){history.back(-1)}function callAjaxByName(params,iCallBack,iCallBackParam){var iUrl=getValue(params,"iUrl");var iFormId=getValue(params,"iFormId");var iPost=getValue(params,"iPost");var isHowMethod=getValue(params,"isHowMethod");var iLoading=getValue(params,"iLoading");var iTarget=getValue(params,"iTarget");var iParams=getValue(params,"iParams");var iAsync=getValue(params,"iAsync");var tipTime=getValue(params,"tipTime");return callAjax(iUrl,iFormId,iPost,isHowMethod,iLoading,iTarget,iParams,iCallBack,iCallBackParam,iAsync,tipTime)}function getValue(params,key){var splitstr=new Array();splitstr=params.split("|");for(var i=0;i<splitstr.length;i++){var indexNum=splitstr[i].indexOf("=");var key2=splitstr[i].substr(0,indexNum);if(key2==key){return splitstr[i].replace(key+"=","")}}return""}function callAjax(iUrl,iFormId,iPost,isHowMethod,iLoading,iTarget,iParams,iCallBack,iCallBackParam,iAsync,tipTime){var idata="";var aAsync=(iAsync=="false")?false:true;var aPost=iPost?"POST":"GET";iTarget=iTarget?iTarget:"lookUpContent";var xParams="";if(iFormId){xParams=$("#"+iFormId).serialize()}if(aAsync){showTip(iTarget,iLoading)}xParams=xParams+"&CPTS="+new Date().getTime();$.ajax({type:aPost,url:iUrl,async:aAsync,data:xParams+iParams,complete:function(data){data=data.responseText;if(data.indexOf("[ERRORPAGE]")>=0){data="[ERROR]抱歉，系统繁忙，请稍后再试！"}if(data.indexOf("[LOGINPAGE]")>=0||data.indexOf('"code":"000021"')>=0){data="[ERROR]尚未登录，请登录后再试！"}if(data.indexOf('"success":0')>=0){data="[ERROR]"+eval("("+data+")").error.message}if(data.indexOf('"success":1')>=0){var json=eval("("+data+")");if(json.tipMessage!=null&&json.tipMessage!=""){data="[OK]"+json.tipMessage}else{data="[OK]操作成功！"}}if(isHowMethod=="1"||isHowMethod=="updateInput"){$("#"+iTarget).val(data.replace("[OK]","").replace("[ERROR]",""))}else{if(isHowMethod=="2"||isHowMethod=="updateDivWithImg"){if(data.indexOf("[OK]")>=0){$("#"+iTarget).html(succ1+data.replace("[OK]","")+succ2)}else{$("#"+iTarget).html(err1+data.replace("[ERROR]","")+err2)}}else{if(isHowMethod=="3"||isHowMethod=="updateDiv"){$("#"+iTarget).html(data.replace("[OK]","").replace("[ERROR]",""))}else{if(isHowMethod=="4"||isHowMethod=="html"){if(data.indexOf("[ERROR]")<0){if(data.trim().length==0){$("#"+iTarget).html("<div class='tc pt10'>没有数据！</div>")}else{$("#"+iTarget).html(data)}}else{$("#"+iTarget).html(err1+data.replace("[ERROR]","")+err2)}}else{if(isHowMethod=="5"||isHowMethod=="replaceDiv"){if(data.indexOf("[ERROR]")<0){$("#"+iTarget).replaceWith(data)}else{lookUp("lookUp","",100,300,3);$("#lookUpContent").html(err1+data.replace("[ERROR]","")+err2);showMessage("lookUp","false",false,-1)}}else{if(isHowMethod=="6"||isHowMethod=="deleteDiv"){if(data.indexOf("[ERROR]")<0){$("#"+iTarget).fadeOut(300)}else{lookUp("lookUp","",100,300,3);$("#lookUpContent").html(err1+data.replace("[ERROR]","")+err2);showMessage("lookUp","false",false,-1)}}else{if(isHowMethod=="7"||isHowMethod=="return"){idata=data}}}}}}}if(iCallBack){if(iCallBackParam){iCallBack(data,iCallBackParam)}else{iCallBack(data)}}if(isHowMethod!="100"&&isHowMethod!="custom"){closeTip(data,iLoading,tipTime)}}});return idata}var floatTimes=0;function showTip(iTarget,iLoading){var oldLoadText=iLoading;var floatOrPropUp=false;if(oldLoadText.toUpperCase().indexOf("PROPUP")>=0){iLoading=iLoading.toUpperCase().replace("PROPUP","").replace("FLOAT","");if(iLoading==""){iLoading="努力加载中，请稍后..."}$("#lookUpContent").html(loadText.replace("努力加载中，请稍后...",iLoading));lookUp("lookUp","",100,300,3);showMessage("lookUp","false",false,-1);floatOrPropUp=true}if(oldLoadText.toUpperCase().indexOf("FLOAT")>=0){showMessage("float","false",false,-1);floatOrPropUp=true;if(floatTimes<0){floatTimes=0}floatTimes=floatTimes+1}if(!floatOrPropUp&&document.getElementById(iTarget)&&document.getElementById(iTarget).tagName!="INPUT"){if(iLoading.toUpperCase()!="FALSE"){if(iLoading.indexOf("<img")>=0){$("#"+iTarget).html(iLoading)}else{if(iLoading==""){iLoading="努力加载中，请稍后..."}$("#"+iTarget).html(loadText.replace("努力加载中，请稍后...",iLoading))}}}}function closeTip(data,iLoading,tipTime){tipTime=tipTime?tipTime:5;if(data.indexOf("[OK]")>=0||data.indexOf("[ERROR]")<0){tipTime=2}var tipMessage=tipTime+"秒后自动关闭";if(tipTime==-1){tipMessage=""}if(data.indexOf("[OK]")>=0){if(data.replace("[OK]","")!=""){tipMessage=data.replace("[OK]","")+"，"+tipMessage}else{tipMessage="操作成功"+"，"+tipMessage}}if(data.indexOf("[ERROR]")>=0){tipMessage=data.replace("[ERROR]","")+"<br>"+tipMessage}if(iLoading.toUpperCase().indexOf("PROPUP")>=0){if(data.indexOf("[OK]")>=0){$("#lookUpContent").html(succ1+tipMessage+succ2)
}else{if(data.indexOf("[ERROR]")<0){$("#lookUpContent").html(succ1+tipMessage+succ2)}else{$("#lookUpContent").html(err1+tipMessage+err2)}}showMessage("lookUp","false",false,tipTime)}if(iLoading.toUpperCase().indexOf("FLOAT")>=0){floatTimes=floatTimes-1;if(floatTimes==0){showMessage("float","false",false,0)}}if(iLoading.toUpperCase().indexOf("TIP")>=0){if(tipMessage!=""){if(tipMessage!="false"&&tipMessage!=false){$("#tip-div").html(tipMessage)}}$("#tip-div").css("left",($(window).width()/2-$("#tip-div").width()/2)+"px");showMessage("tip-div",tipMessage,false,tipTime)}}function showMessage(id,message,ishake,time){if(message!=""){if(message!="false"&&message!=false){$("#"+id).html(message)}$("#"+id).fadeIn(300);if(ishake){shake(id)}if(time!=-1){if(isNaN(time)){time=2000}else{if(time>0){time=time*1000}}setTimeout(function(){if(time!=0){$("#"+id).fadeOut(500)}else{$("#"+id).fadeOut(300)}$("#"+id).hide("fast")},time)}}}function shake(o){var $panel=$("#"+o);var box_left=0;$panel.css({"left":box_left});for(var i=1;4>=i;i++){$panel.animate({left:box_left-(8-2*i)},50);$panel.animate({left:box_left+2*(8-2*i)},50)}}function lookUp(id,e,lHeight,lWidth,onMouse,positionId){var lObj=self.document.getElementById(id);var lTop;var lLeft;if(onMouse==7){lLeft=$(window).width()/2-(lWidth/2);lObj.style.top="30px";lObj.style.width=lWidth+"px";lObj.style.height="auto";lObj.style.left=lLeft+"px";return}if(e.clientY&&onMouse&&onMouse!=0){lTop=e.clientY;lLeft=e.clientX;if(onMouse==1){lLeft=lLeft-(lWidth/2)}else{if(onMouse==2){lTop=lTop-(lHeight/2)}else{if(onMouse==3){lTop=lTop-(lHeight/2);lLeft=lLeft-(lWidth/2)}else{if(onMouse==4){lTop=e.clientY;lLeft=e.clientX}}}}}else{lTop=$(window).height()/2-(lHeight/2);lLeft=$(window).width()/2-(lWidth/2)}if(onMouse==5){lTop=$("#"+positionId).offset().top+$("#"+positionId).outerHeight()-1;lLeft=$("#"+positionId).offset().left-1}if(lLeft<0){lLeft=5}if((lLeft+lWidth*1)>$(window).width()){lLeft=$(window).width()-lWidth-20}if((lTop+lHeight*1)>$(window).height()){lTop=$(window).height()-lHeight-70}lObj.style.width=lWidth+"px";lObj.style.left=(lLeft+document.documentElement.scrollLeft)+"px";lObj.style.height=lHeight+"px";lObj.style.top=lTop+"px"}function iClose(id){$("#"+id).fadeOut(300)}function iShow(id){$("#"+id).fadeIn(300)}function selectAll(id,name){if($("#"+id).prop("checked")==true){$("input[name='"+name+"']").prop("checked",true)}else{$("input[name='"+name+"']").prop("checked",false)}};

String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};function goTop(){$("html, body").animate({scrollTop:0},400)}function scrollToId(id){$("html, body").animate({scrollTop:$("#"+id).offset().top},400)}function scrollToIdByParentId(parentId,id,adjustPix){var mainContainer=$("#"+parentId);var scrollToContainer=$("#"+id);mainContainer.animate({scrollTop:scrollToContainer.offset().top-mainContainer.offset().top+mainContainer.scrollTop()+adjustPix},200)}function tooltip(id){$("[data-toggle='tooltip']").tooltip();$("#"+id).tooltip("show")}function getParamFromUrl(url,name){if(url.indexOf("?")<=0){return null}url=url.substring(url.indexOf("?")+1);var parameters=url.split("&");for(var i=0;i<parameters.length;i++){if(parameters[i].split("=").length==2&&parameters[i].split("=")[0]==name){return parameters[i].split("=")[1]}}return null}function replaceParamFromUrl(url,name,value){var oldValue=getParamFromUrl(url,name);if(oldValue){url=replaceAll(url,name+"="+oldValue,name+"="+value)}else{url=url+"&"+name+"="+value}return url}function replaceAll(originalStr,oldStr,newStr){if(!newStr){newStr=""}var regExp=new RegExp(oldStr,"gm");return originalStr.replace(regExp,newStr)}$(function(){$('[data-toggle="tooltip"]').tooltip()});function changeDisplay(id1,id2,id3,id4){$("#"+id2).addClass("none");$("#"+id1).removeClass("none");if(id3){$("#"+id3).addClass("none")}if(id4){$("#"+id4).addClass("none")}}function openMyDialog(title,iwidth){if(!iwidth){iwidth=400}lookUp("myDialog","","",iwidth,7,"");$("#myDialogContent").css("max-height",($(document).height()*0.8)+"px");showMessage("myDialog","false",false,-1);showMessage("fade","false",false,-1);title=title?title:"编辑";$("#myDialog-title").html(title)}function closeMyDialog(tagDiv){iClose(tagDiv);iClose("fade")}var dialogOldTop;var dialogOldLeft;var dialogOldHeight;var dialogOldWidth;var oldMaxHeight;function fullMyDialog(tagDiv,tagDivContent){var target=$("#"+tagDiv);if(target.css("top")!="0px"){dialogOldTop=target.css("top");dialogOldLeft=target.css("left");dialogOldHeight=target.css("height");dialogOldWidth=target.css("width");$("#"+tagDiv).css("top","0px");$("#"+tagDiv).css("left","0px");$("#"+tagDiv).css("height","100%");$("#"+tagDiv).css("width","100%");$("#"+tagDiv).css("width","100%");if(tagDivContent){oldMaxHeight=$("#"+tagDivContent).maxHeight;$("#"+tagDivContent).css("max-height","100%")}}else{$("#"+tagDiv).css("top",dialogOldTop);$("#"+tagDiv).css("left",dialogOldLeft);$("#"+tagDiv).css("height",dialogOldHeight);$("#"+tagDiv).css("width",dialogOldWidth);if(tagDivContent){$("#"+tagDivContent).css("max-height",oldMaxHeight)}}}function loadPick(event,iwidth,iheight,radio,tag,code,def,params,showType,iCallBack,iCallBackParam){if(!params){params=""}if(showType!=0&&!showType){showType=5}callAjaxByName("iUrl=pick.do|isHowMethod=updateDiv|iParams=&radio="+radio+"&code="+code+"&tag="+tag+"&def="+def+params,iCallBack,iCallBackParam);lookUp("lookUp",event,iheight,iwidth,showType,tag);showMessage("lookUp","false",false,-1)}function uploadImage(id,size,form){if(!iLength(id,1,-1,"未选着图片，上传失败")){return false}var fileSize=document.getElementById(id).files[0].size;if(size>0&&fileSize>size*1024){alert("图片不能大于"+size+"kb,约"+(Math.round(size*1000/1024)/1000)+"M");return false}lookUp("lookUp","",100,350,0);$("#lookUpContent").html("上传中，请稍后...");showMessage("lookUp","false",false,-1);form.submit()}function uploadImgCallBack(msg,url,property){if(msg.indexOf("[OK]")>=0){$("#image").attr("src",url+"");$("#image").removeClass("ndis");showMessage("lookUp","false",false,0);if(url!=undefined){var rootScope=getRootScope();rootScope.$apply(function(){rootScope.model[property]=url})}}else{$("#lookUpContent").html(err1+"&nbsp; "+url+""+err2);showMessage("lookUp","false",false,3)}}function uploadFileCallBack(msg,url){if(msg.indexOf("[OK]")>=0){showMessage("lookUp","false",false,0);if(url!=undefined){var rootScope=getRootScope();rootScope.$apply(function(){rootScope.model.filePath=url;if(!rootScope.model.name){rootScope.model.name=$("#filePath").val().substring($("#filePath").val().lastIndexOf("\\")+1)}})}}else{$("#lookUpContent").html(err1+"&nbsp; "+url+""+err2);showMessage("lookUp","false",false,3)}}function changeimg(imgId,inputId){try{document.getElementById(imgId).src="getImgCode.do?"+Math.random();document.getElementById(inputId).focus()}catch(ex){}return false}function getRootScope(){var $body=angular.element(document.body);return $body.scope().$root}function getStateParams(){var $body=angular.element(document.body);return $body.scope().$stateParams}function initDatePicker(id){if($("#"+id)){$("#"+id).datetimepicker({language:"zh-CN",weekStart:1,autoclose:1,startView:2,minView:2,forceParse:0,format:"yyyy-mm-dd"})}}function initDatePicker2(id){if($("#"+id)){$("#"+id).datetimepicker({language:"zh-CN",weekStart:1,autoclose:1,startView:2,minView:1,forceParse:0,format:"yyyy-mm-dd hh"})}}function addCookieToParams(key,value){var params=$.cookie("params");params=addParams(params,key,value);
$.cookie("params",params)}function clearCookie(params){$.cookie(params,"")}function addCookie(key,value){$.cookie(key,value)}function getCookie(key){return $.cookie(key)}function clearForm(id,nots){$(":input","#"+id).not(":button, :submit, :reset"+nots).val("").removeAttr("checked").removeAttr("selected")}function selectRadio(className,id,radioId){var objs=$("."+className);objs.removeClass("active");var obj=$("#"+id);var cobj=$("#"+radioId);if(!obj.hasClass("active")){obj.addClass("active");$(cobj).prop("checked",true)}}function selectButton(obj,className,activeCss){if(!activeCss){activeCss="iactive"}window.editorId=new Date().getTime();var objs=$("."+className);objs.removeClass(activeCss);$(obj).addClass(activeCss)}function myConfirm(message){var begin=Date.now();var result=window.confirm(message);var end=Date.now();if(end-begin<10){$("#global-error").text("Please do not disable popups,it's dangerous!「请勿禁用【确认】弹窗，直接操作非常危险」");$("#global-error").removeClass("ndis");return true}return result}function sleep(numberMillis){var now=new Date();var exitTime=now.getTime()+numberMillis;while(true){now=new Date();if(now.getTime()>exitTime){return}}}var tipMessage="        .----.\n"+"       _.'__    `.\n"+"   .--($$)($$)--/#\\\n"+" .' @          /###\\\n"+" :         ,   #####\n"+"  `-..__.-' _.-###/\n"+"        `:_:    `\"'\n"+'      .\'"""""\'.\n'+"     //  CRAP \\\\\n"+"     //  API!  \\\\\n"+"    `-._______.-'\n"+"    ___`. | .'___\n"+"   (______|______)\n";!function(){var foo=/./;var i=0;console.info(foo);foo.toString=function(){i++;var tip="";for(var time=1;time<i;time++){tip=tip+"又"}if(i==1){console.info("~ 想查看源代码？来这啊↩ ~");console.info("~ https://github.com/EhsanTang/ApiManager ~");console.info("~ https://gitee.com/CrapApi/CrapApi ~");console.info("~ 完全开源、免费，记得star、fork再走哦 ~");console.info("~ 视频介绍、安装部署...，请前往官网 http://api.crap.cn ~")}else{console.info("~ 你"+tip+"来了，star、fork了吗 ~")}return tipMessage}}();(function(){var href=location.href;if(href.indexOf("#")<=0&&href.indexOf("admin.do")>0){location.href=href+URL_LIST[MY_PROJECT]}})();var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?b4a454e8f7114e487f10d7852f0c55c8";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();

function iLength(id,min,max,message){var length=$("#"+id).val().trim().length;if((min!=-1&&length<min)||(max!=-1&&length>max)){$("#"+id).focus();if(message!=""){alert(message)}return false}return true}function iCompare(id,min,max,message){if(!iDouble(id,"输入只能为数字")){return false}var value=$("#"+id).val();if((value<min)||(value>max)){$("#"+id).focus();if(message!=""){alert(message)}return false}return true}function iShuzi(id,message){if($("#"+id).val().length==0){return true}if(isNaN($("#"+id).val())){$("#"+id).focus();if(message!=""){alert(message)}return false}return true}function iDouble(id,message){try{var number=$("#"+id).val();if(parseFloat(number)!=number){$("#"+id).focus();if(message!=""){alert(message)}return false}else{$("#"+id).val(parseFloat(number));return true}}catch(ex){$("#"+id).focus();if(message!=""){alert(message)}return false}}function iInt(id,message){try{var number=$("#"+id).val();if(parseInt(number)!=number){$("#"+id).focus();if(message!=""){alert(message)}return false}else{$("#"+id).val(parseInt(number));return true}}catch(ex){$("#"+id).focus();if(message!=""){alert(message)}return false}}function equals(str1,str2){if(str1==str2){return true}else{return false}}this.isNull=function(str){if(str==""){return true}var regu=/^[\s'　']*$/;var re=new RegExp(regu);return re.test(str)};function loginValidate(){if(!iLength("userName",2,20,"")){showMessage("warnMessage","用户名不能为空，长度为2-20",true,3);return false}if(!iLength("userPassword",5,20,"")){showMessage("warnMessage","密码不能为空，长度为5-20",true,3);return false}return true};

function propUpPasswordDiv(obj){var msg=obj.textContent;if(msg.indexOf(NEED_PASSWORD_CODE)>=0){var obj=document.getElementById("passwordDiv");if(obj){lookUp("passwordDiv","",300,300,6,"");showMessage("passwordDiv","false",false,-1);showMessage("fade","false",false,-1);changeimg("imgCode","verificationCode");$("#password").val("");$("#password").focus()}}else{if(msg.indexOf(NEED_LOGIN)>=0){openPage("loginOrRegister.do#/login")}}}function unescapeAndDecode(name){var value=$.cookie(name);if(value){return unescape($.base64.decode(value))}return""}function getParamFromTable(tableId,requiredName){var json="[";var i=0;var j=0;$("#"+tableId).find("tbody").find("tr").each(function(){var ignore=false;$(this).find("td").find("input").each(function(i,val){if(val.name==requiredName&&val.value==""){ignore=true}});if(!ignore){i=i+1;j=0;if(i!=1){json+=","}json+="{";$(this).find("td").find("input").each(function(i,val){j=j+1;if(j!=1){json+=","}json+='"'+val.name+'":"'+replaceAll(val.value,'"','\\"')+'"'});$(this).find("td").find("select").each(function(i,val){j=j+1;if(j!=1){json+=","}json+='"'+val.name+'":"'+replaceAll(val.value,'"','\\"')+'"'});json+="}"}});json+="]";return json}function setPassword(){$.cookie("password",$.base64.encode(escape($("#password").val())));$.cookie("visitCode",$.base64.encode(escape($("#visitCode").val())));if(getRootScope().error&&getRootScope().error.indexOf(NEED_PASSWORD_CODE)>0){getRootScope().error=""}}var navigateText="";var deep=0;var select=0;var hasLoad=0;function keyMonitor(){hasLoad=1;var lookUp=document.getElementById("lookUp");$(document).keydown(function(event){try{if(event.keyCode==8&&lookUp.style.display=="block"){if(navigateText.length>=1){navigateText=navigateText.substring(0,navigateText.length-1)}if(navigateText.trim().length==0){$("#pickTip").css("display","none")}var tHandler="pickScroll('"+navigateText+"')";setTimeout(tHandler,500);return false}else{if(event.keyCode!=13){navigateText+=String.fromCharCode(event.keyCode);if(lookUp.style.display!="block"){navigateText=""}navigateText=navigateText.trim();var tHandler="pickScroll('"+navigateText+"')";setTimeout(tHandler,500)}}}catch(e){alert(e)}})}function pickScroll(oldNavigateText){$("#pickTip").html(navigateText);if(navigateText.trim().length>0){$("#pickTip").css("display","block")}if(oldNavigateText!=navigateText){return}deep=oldNavigateText.length;var lookUp=document.getElementById("lookUp");if(lookUp.style.display=="block"){select=0;jQuery.each($("#pickContent").find("div"),function(){var span=jQuery(this).find("span");var checkBox=jQuery(this).find("input");if(select==0){checkText(this,oldNavigateText,span,checkBox,1)}})}}function checkText(obj,oldNavigateText,span,checkBox,length){if(span.text().substring(length-1,length).toUpperCase()==oldNavigateText.substring(length-1,length)){if(length<deep){checkText(obj,oldNavigateText,span,checkBox,length+1)}else{var container=$("#lookUpContent"),scrollTo=span;container.scrollTop(scrollTo.offset().top-container.offset().top+container.scrollTop()-100);$("#pickContent div").removeClass("pickSelect");$("#pickContent div").removeClass("main-color");$(obj).addClass("pickSelect");$(obj).addClass("main-color");select=1}}}function setPick(){var length=document.getElementsByName("cid").length;var checkBoxValue="";var checkBoxName="";var rootScope=getRootScope();for(var i=0;i<length;i++){if(pickRadio=="true"){if(document.getElementsByName("cid")[i].checked==true){rootScope.$apply(function(){if(pickTagName){$("#"+pickTagName).val($(".cidName")[i].textContent);if(rootScope.model){rootScope.model[pickTagName]=$(".cidName")[i].textContent}}$("#"+pickTag).val(document.getElementsByName("cid")[i].value);if(rootScope.model){rootScope.model[pickTag]=document.getElementsByName("cid")[i].value}});break}}else{if(document.getElementsByName("cid")[i].checked==true){checkBoxValue=checkBoxValue+document.getElementsByName("cid")[i].value+",";checkBoxName=checkBoxName+$(".cidName")[i].textContent+","}}}if(pickRadio=="false"){rootScope.$apply(function(){$("#"+pickTag).val(checkBoxValue);rootScope.model[pickTag]=checkBoxValue;if(pickTagName){checkBoxName=replaceAll(checkBoxName,"-","");checkBoxName=replaceAll(checkBoxName," ","");$("#"+pickTagName).val(checkBoxName);rootScope.model[pickTagName]=checkBoxName}})}if(pickCallBack){if(pickCallBackParam){pickCallBack(pickCallBackParam)}else{pickCallBack()}}iClose("lookUp")}function needHiddenModule(){if($("#type").val()=="SHOWMENU"||$("#type").val()=="USER"||$("#type").val()=="MENU"||$("#type").val()=="ROLE"){iClose("roleModuleId")}else{iShow("roleModuleId")}}function rebuildIndex(obj){if(myConfirm("确定重建索引？")){selectButton(obj,"menu_a");callAjaxByName("iUrl=admin/rebuildIndex.do|iLoading=PROPUPFLOAT重建索引中，刷新页面可以查看实时进度...|ishowMethod=updateDivWithImg")}}function loginOut(){callAjaxByName("iUrl=user/loginOut.do|isHowMethod=updateDiv|iLoading=false|ishowMethod=doNothing|iAsync=false");location.reload()}function flushDB(obj){if(myConfirm("确定刷新缓存？")){selectButton(obj,"menu_a");
callAjaxByName("iUrl=admin/flushDB.do|iLoading=TIPFLOAT刷新中，请稍后...|ishowMethod=updateDivWithImg")}}function compress(obj){selectButton(obj,"menu_a");callAjaxByName("iUrl=admin/compress.do|iLoading=TIPFLOAT刷新中，请稍后...|ishowMethod=updateDivWithImg")};

function format(txt,tiperror){try{var txtObj=JSON.parse(txt);return JSON.stringify(txtObj,null,5)}catch(e){if(tiperror){alert("格式化异常，请检查json格式是否有误"+e)}return txt}}function format_delete(txt,tiperror,compress){var indentChar="    ";if(/^\s*$/.test(txt)){if(tiperror){alert("数据为空,无法格式化! ")}return}txt=txt.replace(/\\r/g,"CRAPAPI_R");txt=txt.replace(/\\n/g,"CRAPAPI_N");txt=txt.replace(/\\t/g,"CRAPAPI_T");var data;try{data=$.parseJSON(txt)}catch(e){if(tiperror){alert("数据源语法错误,格式化失败! 错误信息: "+e.description,"err")}return}var draw=[],last=false,This=this,line=compress?"":"\n",nodeCount=0,maxDepth=0;var notify=function(name,value,isLast,indent,formObj){nodeCount++;for(var i=0,tab="";i<indent;i++){tab+=indentChar}tab=compress?"":tab;maxDepth=++indent;if(value&&value.constructor==Array){draw.push(tab+(formObj?('"'+name+'":'):"")+"["+line);for(var i=0;i<value.length;i++){notify(i,value[i],i==value.length-1,indent,false)}draw.push(tab+"]"+(isLast?line:(","+line)))}else{if(value&&typeof value=="object"){draw.push(tab+(formObj?('"'+name+'":'):"")+"{"+line);var len=0,i=0;for(var key in value){len++}for(var key in value){notify(key,value[key],++i==len,indent,true)}draw.push(tab+"}"+(isLast?line:(","+line)))}else{if(typeof value=="string"){value=value.replace(/\"/gm,'\\"');value=value.replace(/CRAPAPI_R/g,"\\r");value=value.replace(/CRAPAPI_N/g,"\\n");value=value.replace(/CRAPAPI_T/g,"\\t");value='"'+value+'"'}draw.push(tab+(formObj?('"'+name+'":'):"")+value+(isLast?"":",")+line)}}};var isLast=true,indent=0;notify("",data,isLast,indent,false);return draw.join("")}function jsonToDiv(txt){var indentChar="-";if(/^\s*$/.test(txt)){alert("数据为空,无法格式化! ");return""}try{var data=eval("("+txt+")")}catch(e){alert("数据源语法错误,格式化失败! 错误信息: "+e.description,"err");return""}var draw=[],line=",",nodeCount=0;var paramSeparator="->";var notify=function(parentName,name,value,indent){nodeCount++;for(var i=0,tab="";i<indent;i++){tab+=indentChar}indent++;if(value&&value.constructor==Array){if(value.length>0){var type="";if(value[0]&&typeof value[0]=="object"){type="object"}else{if(typeof value=="string"){type="string"}else{if(typeof value=="number"){type="number"}else{if(typeof value=="boolean"){type="boolean"}}}}if(name!=""){if(parentName&&parentName!=""){parentName=parentName+paramSeparator+name}else{parentName=name}draw.push('{"deep":"'+tab.length+'","name":"'+parentName+'","remark":"","type":"array['+type+']","necessary":"true"}'+line)}else{indent=indent-1}notify(parentName,"",value[0],indent)}}else{if(value&&typeof value=="object"){if(name!=""){if(parentName&&parentName!=""){parentName=parentName+paramSeparator+name}else{parentName=name}draw.push('{"deep":"'+tab.length+'","name":"'+parentName+'","remark":"","type":"object","necessary":"true"}'+line)}else{indent=indent-1}for(var key in value){notify(parentName,key,value[key],indent)}}else{var type;if(typeof value=="string"){value=value.replace(/\"/gm,'\\"');value='"'+value+'"';type="string"}else{if(typeof value=="number"){type="number"}else{if(typeof value=="boolean"){type="boolean"}}}if(name!=""){if(parentName&&parentName!=""){parentName=parentName+paramSeparator+name}else{parentName=name}draw.push('{"deep":"'+tab.length+'","name":"'+parentName+'","remark":"","type":"'+type+'","necessary":"true"}'+line)}}}};var indent=0;notify("","",data,indent);var result=draw.join("");if(result.length>0){result=result.substring(0,result.length-1)}return"["+result+"]"};

var markdownEditor;function createEditorMe(id,markdownContent){if(markdownEditor!=null){return}markdownEditor=editormd(id,{path:"./resources/framework/editormd-1.5.0/lib/",width:"100%",height:500,theme:"default",previewTheme:"default",codeFold:true,toolbarIcons:function(){return["undo","redo","|","bold","del","italic","quote","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","preformatted-text","code-block","table","datetime","emoji","html-entities","pagebreak","|","goto-line","watch","preview","fullscreen","clear","search","|","help"]},saveHTMLToTextarea:true,searchReplace:true,htmlDecode:"style,script,iframe|on*",emoji:true,taskList:true,tocm:true,tex:true,flowChart:true,sequenceDiagram:true,imageUpload:true,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"user/markdown/upload.do",onload:function(){console.log("onload",this);this.unwatch();this.setMarkdown(markdownContent)},onfullscreen:function(){$("#"+id).css("z-index",101)},onfullscreenExit:function(){$("#"+id).css("z-index",99)}})}function createWangEditor(id,modelField,init,height){userMarkdown=false;var root=getRootScope();var E=window.wangEditor;var editor=new E(document.getElementById(id));init(editor,modelField);editor.create();if(height){$(".w-e-text-container").css("height",height)}$(".w-e-text-container").css("z-index",98);$(".w-e-menu").css("z-index",99);if(root.model[modelField]==null){root.model[modelField]=""}editor.txt.html(root.model[modelField])}function initArticleEditor(editor,modelField){var root=getRootScope();editor.customConfig.uploadImgMaxLength=1;editor.customConfig.uploadImgMaxSize=3*1024*1024;editor.customConfig.uploadImgServer="user/file/upload.do";editor.customConfig.uploadFileName="img";editor.customConfig.zIndex=999;editor.customConfig.uploadImgHooks={fail:function(xhr,editor,result){$("#lookUpContent").html(err1+"&nbsp; "+result.errorMessage+""+err2);showMessage("lookUp","false",false,3)}};editor.customConfig.onchange=function(html){root.model[modelField]=html}}function initInterfaceEditor(editor,modelField){var root=getRootScope();editor.customConfig.menus=["head","bold","fontSize","fontName","italic","foreColor","backColor","justify","undo","redo"];editor.customConfig.onchange=function(html){root.model[modelField]=html}}var userMarkdown=false;function changeEditor(obj,markdown){$(".article-editor").removeClass("btn-main");$(".article-editor").addClass("btn-default");if(markdown){userMarkdown=true;$("#article-editor").addClass("none");$("#markdown-editor").removeClass("none");createEditorMe("markdown-editor",getRootScope().model.markdown)}else{userMarkdown=false;$("#article-editor").removeClass("none");$("#markdown-editor").addClass("none")}$(obj).addClass("btn-main");$(obj).removeClass("btn-default")}function initDragTable(id){$("#"+id+" tbody").sortable({cursor:"move",containment:"parent",delay:100,distance:0,cancel:"button",axis:"y",handle:"span",items:".drag",opacity:1,update:function(event,ui){}});$("#"+id+" tbody").sortable({connectToSortable:"#body",helper:fixHelperModified,stop:updateIndex}).disableSelection()}var fixHelperModified=function(e,tr){var $originals=tr.children();var $helper=tr.clone();$helper.children().each(function(index){$(this).width($originals.eq(index).width()+6)});$helper.width(tr.width()+1);$helper.css("margin-left","-1px");return $helper};var updateIndex=function(e,ui){};function deleteOneTr(nowTr){$(nowTr).parent().parent().parent().remove()}function isLast(target,model){if(target){if($(target).val()==""){return false}var tr=$(target).parent().parent();var totalTrNum=tr.parent().children().length;if(tr.index()+1!=totalTrNum){return false}}return true}var deleteButton="<button class='cursor btn btn-xs btn-default' type='button'><i class='iconfont text-danger' onclick='deleteOneTr(this)'>&#xe69d;</i> </button>";var moverSpan="<span class='cursor btn btn-xs btn-default' style='cursor: move;'><i class='iconfont'>&#xe6fd;</i></span>";var interNameHtml="<td><input class='form-control C000 fw500' type='text' name='name' value='INTER_NAME' "+"placeholder='参数名必填，或者会被过滤。多级参数请使用\"->\"分割，如：firstParam->secondParam' autocomplete='off' "+"onkeyup='ADD_ONE_TR(this)'></td>";var remarkHtml="<td><input class='form-control C000 fw500' type='text' name='remark' autocomplete='off' value='REMARK' onkeyup='ADD_ONE_TR(this)'></td> ";var defHtml="<td> <input class='form-control C000 fw500' type= 'text' name='def' autocomplete='off' onkeyup='ADD_ONE_TR(this)' value='DEF' placeholder='默认值'></td>";var interOperateHtml="<td class='tc BGFFF'>"+deleteButton+"&nbsp;"+moverSpan+"</td>";var interNecessaryHtml="<td> <select name='necessary' class='form-control'>"+"<option value='true' true_select>是</option>"+"<option value='false' false_select>否</option>"+"</select></td>";var interTypeHtml="<td> <select name='type' class='form-control'>"+"<option value='string' string_select>string</option>"+"<option value='int' int_select>int</option>"+"<option value='float' float_select>float</option>"+"<option value='long' long_select>long</option>"+"<option value='byte' byte_select>byte</option>"+"<option value='double' double_select>double</option>"+"<option value='number' number_select>number</option>"+"<option value='boolean' boolean_select>boolean</option>"+"<option value='object' object_select>object</option>"+"<option value='array' array_select>array</option>"+"<option value='array[int]' array[int]_select>array[int]</option>"+"<option value='array[float]' array[float]_select>array[float]</option>"+"<option value='array[long]' array[long]_select>array[long]</option>"+"<option value='array[byte]' array[byte]_select>array[byte]</option>"+"<option value='array[double]' array[double]_select>array[double]</option>"+"<option value='array[number]' array[number]_select>array[number]</option>"+"<option value='array[boolean]' array[boolean]_select>array[boolean]</option>"+"<option value='array[string]' array[string]_select>array[string]</option>"+"<option value='array[object]' array[object]_select>array[object]</option>"+"<option value='file' file_select>file</option>"+"</select> </td>";
var dictNameHtml="<td><input class='form-control' autocomplete='off' type='text' name='name' value='DICT_NAME' placeholder='必填，不填将被过滤' onkeyup='addOneDictionaryTr(this)'></td>";var dictTypeHtml="<td><input class='form-control' type='text' name='type' value='DICT_TYPE' placeholder='类型'></td>";var dictNotNullHtml="<td><select name='notNull' class='form-control'>"+"<option value='true' true_select>true</option><option value='false' false_select>false</option>"+"</select></td>";var dictFlagHtml="<td><select name='flag' class='form-control'>"+"<option value='common' common_select>普通</option><option value='primary' primary_select>主键</option>"+"<option value='foreign' foreign_select>外键</option><option value='associate' associate_select>关联</option>"+"</select></td>";var interParamPositionHtml="<td> <select name='inUrl' class='form-control'>"+"<option value='false' false_select>普通参数</option>"+"<option value='true' true_select>URL路径</option>"+"</select></td>";function addOneDictionaryTr(target,model){if(!isLast(target,model)){return}if(!model){model=new Object()}$("#content").append("<tr class='drag'>"+replaceAll(dictNameHtml,"DICT_NAME",model.name)+replaceAll(dictTypeHtml,"DICT_TYPE",model.type)+replaceAll(dictNotNullHtml,model.notNull+"_select"," selected ")+replaceAll(replaceAll(defHtml,"DEF",model.def),"ADD_ONE_TR","addOneDictionaryTr")+replaceAll(dictFlagHtml,model.flag+"_select"," selected ")+replaceAll(replaceAll(remarkHtml,"REMARK",model.remark),"ADD_ONE_TR","addOneDictionaryTr")+interOperateHtml+"</tr>")}function addOneInterHeadTr(target,model){if(!isLast(target,model)){return}if(!model){model=new Object()}$("#editHeaderTable").append("<tr class='drag'>"+replaceAll(replaceAll(interNameHtml,"INTER_NAME",model.name),"ADD_ONE_TR","addOneInterHeadTr")+replaceAll(interNecessaryHtml,model.necessary+"_select"," selected ")+replaceAll(interTypeHtml,model.type+"_select"," selected ")+replaceAll(replaceAll(defHtml,"DEF",model.def),"ADD_ONE_TR","addOneInterHeadTr")+replaceAll(replaceAll(remarkHtml,"REMARK",model.remark),"ADD_ONE_TR","addOneInterHeadTr")+interOperateHtml+"</tr>")}var debugValueHtml="<td> <input class='form-control C000 fw500' type= 'text' name='def' autocomplete='off' onkeyup=\"ADD_ONE_TR('TABLE_ID',this)\" value='DEBUG_VALUE' placeholder='值'></td>";var debugNameHtml="<td><input class='form-control C000 fw500' type='text' name='name' value='DEBUG_NAME' placeholder='参数名' autocomplete='off' onkeyup=\"ADD_ONE_TR('TABLE_ID',this)\"></td>";function addOneDebugTr(id,target,model){if(!isLast(target,model)){return}if(!model){model=new Object()}$("#"+id).append("<tr class='drag'>"+replaceAll(replaceAll(replaceAll(debugNameHtml,"DEBUG_NAME",model.realName),"ADD_ONE_TR","addOneDebugTr"),"TABLE_ID",id)+replaceAll(replaceAll(replaceAll(debugValueHtml,"DEBUG_VALUE",model.def),"ADD_ONE_TR","addOneDebugTr"),"TABLE_ID",id)+interOperateHtml+"</tr>")}function addOneInterParamTr(target,model){if(!isLast(target,model)){return}if(!model){model=new Object()}$("#editParamTable").append("<tr class='drag'>"+replaceAll(replaceAll(interNameHtml,"INTER_NAME",model.name),"ADD_ONE_TR","addOneInterParamTr")+replaceAll(interNecessaryHtml,model.necessary+"_select"," selected ")+replaceAll(interParamPositionHtml,model.inUrl+"_select"," selected ")+replaceAll(interTypeHtml,model.type+"_select"," selected ")+replaceAll(replaceAll(defHtml,"DEF",model.def),"ADD_ONE_TR","addOneInterParamTr")+replaceAll(replaceAll(remarkHtml,"REMARK",model.remark),"ADD_ONE_TR","addOneInterParamTr")+interOperateHtml+"</tr>")}function addOneInterRespTr(target,model){if(!isLast(target,model)){return}if(!model){model=new Object()}$("#editResponseParamTable").append("<tr class='drag'>"+replaceAll(replaceAll(interNameHtml,"INTER_NAME",model.name),"ADD_ONE_TR","addOneInterRespTr")+replaceAll(interNecessaryHtml,model.necessary+"_select"," selected ")+replaceAll(interTypeHtml,model.type+"_select"," selected ")+replaceAll(replaceAll(remarkHtml,"REMARK",model.remark),"ADD_ONE_TR","addOneInterRespTr")+interOperateHtml+"</tr>")}function importJson(type){var jsonText=jsonToDiv($("#importResponseParam").val());if(jsonText.length>0){if(type=="responseParam"){$.each(eval("("+jsonText+")"),function(n,value){addOneInterRespTr(null,value)})}else{if(type=="header"){$.each(eval("("+jsonText+")"),function(n,value){addOneInterHeadTr(null,value)})}else{if(type=="param"){$.each(eval("("+jsonText+")"),function(n,value){addOneInterParamTr(null,value)})}}}}closeMyDialog("myDialog")};
